{
  "hash": "af5fc76d70a1c96c3bac2eb5963c5ab5",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"AE 19: Equality\"\nsubtitle: \"Suggested answers\"\ncategories: \n  - Application exercise\n  - Suggested answers\nfig-width: 6\nfig-asp: 0.618\n---\n\n\n\n::: callout-important\nThese are suggested answers.\nThis document should be used as reference only, it's not designed to be an exhaustive key.\n:::\n\nIn this application exercise, we'll do inference on two population proportions.\n\n# Packages\n\nWe'll use the **tidyverse** and **tidymodels** packages.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(tidymodels)\n```\n:::\n\n\n\n# Data\n\nA September 16-19, 2023, asked North Carolina voters, among other issues, about issues of equality and women's progress.\nSpecifically, one of the questions asked:\n\n> Which of these two statements come closest to your own views---even if neither is exactly right?\n>\n> -   The country has made most of the changes needed to give women equal rights with men.\n>\n> -   The country needs to continue to make changes to give women equal rights to men.\n\nThe results of this survey are summarized [in this report](https://www.meredith.edu/meredith-poll/n-c-voter-opinions-on-abortion-law-women-leaders-and-other-current-issues/) and the data can be found in your `data` folder: `equality.csv`.\n\n# Hypotheses\n\n## Exercise 1\n\nThe two populations of interest in this survey are 18-24 year olds and 25+ year olds.\nState the hypotheses for evaluating whether there is a discernible difference between the proportions of those who think \"The country needs to continue to make changes to give women equal rights to men.\" (`need more changes`) in the two age groups.\n\n*Let* $p$ *= the true proportion of those who think \"The country needs to continue to make changes to give women equal rights to men\" among 18-24 year old NC voters and 25+ year old NC voters.*\n\n$H_0: p_{18-24} = p_{25+}$\n\n$H_A: p_{18-24} \\ne p_{25+}$\n\n# Exploratory analysis\n\nLoad the data.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nequality <- read_csv(\"https://sta199-s24.github.io/data/equality.csv\")\n```\n:::\n\n\n\n## Exercise 2\n\nWhat proportion of 18-24 year olds think \"The country needs to continue to make changes to give women equal rights to men\"?\nWhat proportion of 25+ year olds?\nCalculate and visualize these proportions.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nequality |>\n  count(age, response) |>\n  group_by(age) |>\n  mutate(p_hat = n / sum(n))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 4 × 4\n# Groups:   age [2]\n  age   response              n p_hat\n  <chr> <chr>             <int> <dbl>\n1 18-24 Most changes done    32 0.478\n2 18-24 Need more changes    35 0.522\n3 25+   Most changes done   211 0.319\n4 25+   Need more changes   450 0.681\n```\n\n\n:::\n\n```{.r .cell-code}\nggplot(equality, aes(y = age, fill = response)) +\n  geom_bar(position = \"fill\")\n```\n\n::: {.cell-output-display}\n![](ae-19-equality-randomization-A_files/figure-html/sample-props-1.png){width=576}\n:::\n:::\n\n\n\n## Exercise 3\n\nCalculate the observed sample statistic, i.e., the difference between the proportions of respondents who think \"The country needs to continue to make changes to give women equal rights to men\" between the two age groups.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nobs_stat <- equality |>\n  specify(response = response, explanatory = age, success = \"Need more changes\") |>\n  calculate(stat = \"diff in props\", order = c(\"18-24\", \"25+\"))\n\nobs_stat\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nResponse: response (factor)\nExplanatory: age (factor)\n# A tibble: 1 × 1\n    stat\n   <dbl>\n1 -0.158\n```\n\n\n:::\n:::\n\n\n\n# Testing\n\n## Exercise 4\n\nWhat is the parameter of interest?\n\n*Difference between the proportions of those who think \"The country needs to continue to make changes to give women equal rights to men\" between 18-24 and 25+ year old NC voters.*\n\n## Exercise 5\n\nExplain how you can set up a simulation for this hypothesis test.\n\n*Add response here.*\n\n## Exercise 6\n\nConduct the hypothesis test using randomization and visualize and report the p-value.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(1234)\n\nnull_dist <- equality |>\n  specify(response = response, explanatory = age, success = \"Need more changes\") |>\n  hypothesize(null = \"independence\") |>\n  generate(reps = 1000, type = \"permute\") |>\n  calculate(stat = \"diff in props\", order = c(\"18-24\", \"25+\"))\n\nnull_dist |>\n  get_p_value(obs_stat = obs_stat, direction = \"two sided\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 1\n  p_value\n    <dbl>\n1   0.012\n```\n\n\n:::\n\n```{.r .cell-code}\nnull_dist |>\n  visualize() +\n  shade_p_value(obs_stat = obs_stat, direction = \"two sided\")\n```\n\n::: {.cell-output-display}\n![](ae-19-equality-randomization-A_files/figure-html/null-dist-1.png){width=576}\n:::\n:::\n\n\n\n## Exercise 7\n\nWhat is the conclusion of the hypothesis test?\n\n*With a p-value of 0.018, which is smaller than the discernability level of 0.05, we reject the null hypothesis. The data provide convincing evidence that there is a difference between the proportions of those who think \"The country needs to continue to make changes to give women equal rights to men\".*\n\n## Exercise 8\n\nInterpret the p-value in the context of the data and the hypotheses.\n\nThe probability of observing a difference in sample proportions of those who think *\"The country needs to continue to make changes to give women equal rights to men\" between a sample of* 67 *18-24 year olds and 661 25+ year olds of 0.158 or more (in either direction) is 0.018 if in fact the two population proportions are equal.*\n\n# Estimation\n\n## Exercise 9\n\nEstimate the difference in population proportions of 18-24 year old NC voters and 25+ year old NC voters using a 95% bootstrap interval.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(1234)\n\nboot_dist <- equality |>\n  specify(response = response, explanatory = age, success = \"Need more changes\") |>\n  generate(reps = 1000, type = \"bootstrap\") |>\n  calculate(stat = \"diff in props\", order = c(\"18-24\", \"25+\"))\n\nci <- boot_dist |>\n  get_ci()\nci\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 2\n  lower_ci upper_ci\n     <dbl>    <dbl>\n1   -0.288  -0.0279\n```\n\n\n:::\n\n```{.r .cell-code}\nvisualize(boot_dist) +\n  shade_ci(ci)\n```\n\n::: {.cell-output-display}\n![](ae-19-equality-randomization-A_files/figure-html/bootstrap-ci-1.png){width=576}\n:::\n:::\n\n\n\n## Exercise 10\n\nInterpret the confidence interval in context of the data.\n\n*We are 95% confident that the proportion of 18-24 year old NC voters who think \"The country needs to continue to make changes to give women equal rights to men\" is 28.4% to 3.4% lower than 25+ year old NC voters who share this opinion.*\n\n## Exercise 11\n\nDescribe how the simulation scheme for bootstrapping is different than that for the hypothesis test.\n\n*For bootstrapping we resample with replacement. For testing, we shuffle under the assumption of independence.*\n\n# Conceptual\n\n## Exercise 12\n\nWhat is $p$ vs. $\\hat{p}$ vs. p-value.\nExplain generically as well as in the context of these data and research question.\n\n*Add response here.*\n\n## Exercise 13\n\nWhat is bootstrap distribution vs. null distribution?\nExplain generically as well as in the context of these data and research question.\n\n*Add response here.*\n",
    "supporting": [
      "ae-19-equality-randomization-A_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}