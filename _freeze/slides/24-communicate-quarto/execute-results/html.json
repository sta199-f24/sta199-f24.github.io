{
  "hash": "032a557af221f3ef5314d1150454973d",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Communicating data science results with Quarto\"\nsubtitle: \"Lecture 24\"\ndate: \"2024-11-26\"\nformat: \n  live-revealjs: \n    output-file: 24-communicate-quarto-slides.html\nwebr:\n  cell-options:\n    autorun: false\n---\n\n\n\n\n<!-- begin: webr fodder -->\n\n\n\n\n::: {.cell}\n\n:::\n\n::: {.cell edit='false'}\n```{webr}\n#| edit: false\n#| echo: false\n#| output: false\noptions(width = 60)\n```\n:::\n\n\n\n\n<!-- end: webr fodder -->\n\n<!-- begin: ae definition -->\n\n\n\n\n\n\n\n\n\n<!-- end: ae definition -->\n\n# Warm-up\n\n## While you wait... {.smaller}\n\n::: appex\n-   Go to your `ae` project in RStudio.\n\n-   Make sure all of your changes up to this point are committed and pushed, i.e., there's nothing left in your Git pane.\n\n-   Click Pull to get today's application exercise file: *ae\\-19\\-equality\\-randomization\\.qmd*.\n\n-   Wait till the you're prompted to work on the application exercise during class before editing the file.\n:::\n\n# From last time\n\n## `ae-19-equality-randomization`\n\n::: appex\n-   Go to your ae project in RStudio.\n\n-   Continue working on `ae-19-equality-randomization.qmd`.\n:::\n\n## Recap of AE {.smaller}\n\n-   A hypothesis test is a statistical technique used to evaluate competing claims (null and alternative hypotheses) using data.\n-   We simulate a null distribution using our original data.\n-   We use our sample statistic and direction of the alternative hypothesis to calculate the p-value.\n-   We use the p-value to determine conclusions about the alternative hypotheses.\n\n# Projects with Quarto [live demo]\n\n## Your project write-up with Quarto\n\n- Figure sizing: `fig-width`, `fig-height`, etc. in code cells.\n\n- Figure layout: `layout-ncol` for placing multiple figures in a chunk.\n\n- Further control over figure layout with the **patchwork** package.\n\n- Cell options for what makes it in your final report: `message`, `echo`, etc.\n\n- Citations.\n\n- Finalizing your report with `echo: false`.\n\n## Building your project website with Quarto\n\n- The `docs` folder.\n\n- Making sure your website reflects your latest changes.\n\n- Customizing the look of your website.\n\n## Slides\n\n- **Option 1:** Make your slides not in Quarto but make sure they’re available in your Quarto project website.\n\n- **Option 2:** Make your slides with Quarto.\n\n# Effective communication\n\n## Take A Sad Plot & Make It Better {.smaller}\n\n![](images/24/sad-plot-to-better.gif)\n\n\n## Trends instructional staff employees in universities {.smaller}\n\nThe American Association of University Professors (AAUP) is a nonprofit membership association of faculty and other academic professionals.\n[This report](https://www.aaup.org/sites/default/files/files/AAUP_Report_InstrStaff-75-11_apr2013.pdf) by the AAUP shows trends in instructional staff employees between 1975 and 2011, and contains the following image.\nWhat trends are apparent in this visualization?\n\n![](images/24/staff-employment.png){fig-align=\"center\"}\n\n## Packages\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(scales)\nlibrary(ggthemes)\n```\n:::\n\n\n\n\n## Data {.smaller}\n\nEach row in this dataset represents a faculty type, and the columns are the years for which we have data.\nThe values are percentage of hires of that type of faculty for each year.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstaff <- read_csv(\"data/instructional-staff.csv\")\nstaff\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 5 × 12\n  faculty_type `1975` `1989` `1993` `1995` `1999` `2001` `2003` `2005`\n  <chr>         <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>\n1 Full-Time T…   29     27.6   25     24.8   21.8   20.3   19.3   17.8\n2 Full-Time T…   16.1   11.4   10.2    9.6    8.9    9.2    8.8    8.2\n3 Full-Time N…   10.3   14.1   13.6   13.6   15.2   15.5   15     14.8\n4 Part-Time F…   24     30.4   33.1   33.2   35.5   36     37     39.3\n5 Graduate St…   20.5   16.5   18.1   18.8   18.7   19     20     19.9\n# ℹ 3 more variables: `2007` <dbl>, `2009` <dbl>, `2011` <dbl>\n```\n\n\n:::\n:::\n\n\n\n\n## Recreate - Data prep {.smaller}\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstaff_long <- staff |>\n  pivot_longer(\n    cols = -faculty_type, names_to = \"year\",\n    values_to = \"percentage\"\n  ) |>\n  mutate(\n    percentage = as.numeric(percentage),\n    faculty_type = fct_relevel(\n      faculty_type,\n      \"Full-Time Tenured Faculty\",\n      \"Full-Time Tenure-Track Faculty\",\n      \"Full-Time Non-Tenure-Track Faculty\",\n      \"Part-Time Faculty\",\n      \"Graduate Student Employees\"\n    )\n  )\n```\n:::\n\n\n\n\n## Recreate - Plot\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nggplot(\n  staff_long,\n  aes(\n    x = str_wrap(faculty_type, 20),\n    y = percentage,\n    fill = year\n    )\n  ) +\n  geom_col(position = \"dodge\") +\n  scale_y_continuous(breaks = seq(5, 45, 5), limits = c(0, 45)) +\n  labs(\n    x = NULL,\n    y = \"Percent of Total Instructional Staff\",\n    fill = NULL,\n    title = \"Trends in Instructional Staff Employment Status, 1975-2011\",\n    subtitle = \"All Institutions, National Totals\",\n    caption = \"Source: US Department of Education, IPEDS Fall Staff Survey\"\n  ) +\n  theme(\n    legend.position.inside = c(0.4, 0.93),\n    legend.direction = \"horizontal\",\n    legend.key.size = unit(0.2, \"cm\"),\n    legend.key.height = unit(0.1, \"cm\"),\n    legend.text = element_text(hjust = 0, size = 7),\n    legend.background = element_rect(color = \"black\", linewidth = 0.2),\n    panel.grid.minor = element_blank(),\n    panel.grid.major.x = element_blank(),\n    plot.caption = element_text(size = 8, hjust = 0)\n  ) +\n  guides(fill = guide_legend(nrow = 1))\n```\n\n::: {.cell-output-display}\n![](24-communicate-quarto_files/figure-revealjs/unnamed-chunk-7-1.png){width=1152}\n:::\n:::\n\n\n\n\n## Represent percentages as parts of a whole {.smaller}\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nggplot(\n  staff_long,\n  aes(\n    x = str_wrap(faculty_type, 20),\n    y = percentage,\n    fill = fct_rev(year)\n    )\n  ) +\n  geom_col(position = \"fill\", color = \"white\", linewidth = 0.2) +\n  scale_y_continuous(labels = label_percent()) +\n  labs(\n    x = NULL,\n    y = \"Percent of Total Instructional Staff\",\n    fill = NULL,\n    title = \"Trends in Instructional Staff Employment Status, 1975-2011\",\n    subtitle = \"All Institutions, National Totals\",\n    caption = \"Source: US Department of Education, IPEDS Fall Staff Survey\"\n  ) +\n  theme(\n    legend.text = element_text(hjust = 0, size = 7),\n    legend.background = element_rect(color = \"black\", linewidth = 0.2),\n    panel.grid.minor = element_blank(),\n    panel.grid.major.x = element_blank(),\n    plot.caption = element_text(size = 8, hjust = 0)\n  )\n```\n\n::: {.cell-output-display}\n![](24-communicate-quarto_files/figure-revealjs/unnamed-chunk-8-1.png){width=1152}\n:::\n:::\n\n\n\n\n## Place time on x-axis {.smaller}\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nggplot(\n  staff_long,\n  aes(\n    x = year,\n    y = percentage,\n    color = str_wrap(faculty_type, 20),\n    group = str_wrap(faculty_type, 20)\n    )\n  ) +\n  geom_line(linewidth = 1) +\n  labs(\n    x = NULL,\n    y = \"Percent of Total Instructional Staff\",\n    color = NULL,\n    title = \"Trends in Instructional Staff Employment Status, 1975-2011\",\n    subtitle = \"All Institutions, National Totals\",\n    caption = \"Source: US Department of Education, IPEDS Fall Staff Survey\"\n  ) +\n  scale_y_continuous(labels = label_percent(accuracy = 1, scale = 1)) +\n  theme(\n    legend.key.height = unit(1.5, \"cm\"),\n    plot.caption = element_text(size = 8, hjust = 0)\n  )\n```\n\n::: {.cell-output-display}\n![](24-communicate-quarto_files/figure-revealjs/unnamed-chunk-9-1.png){width=1152}\n:::\n:::\n\n\n\n\n## Pay attention to variable types\n\n::: task\nWhat is wrong with the x-axis of the plot above? How can you fix it?\n:::\n\n. . .\n\nTime is represented as a character string (equally spaces between levels) instead of on a continuous scale (with spacing indicating numbers of years between ticks.\n\n## Fix variable types {.smaller}\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nstaff_long <- staff_long |>\n  mutate(year = as.numeric(year))\n\nggplot(\n  staff_long,\n  aes(\n    x = year,\n    y = percentage,\n    color = str_wrap(faculty_type, 20),\n    group = str_wrap(faculty_type, 20)\n  )\n) +\n  geom_line(linewidth = 1) +\n  labs(\n    x = NULL,\n    y = \"Percent of Total Instructional Staff\",\n    color = NULL,\n    title = \"Trends in Instructional Staff Employment Status, 1975-2011\",\n    subtitle = \"All Institutions, National Totals\",\n    caption = \"Source: US Department of Education, IPEDS Fall Staff Survey\"\n  ) +\n  scale_y_continuous(labels = label_percent(accuracy = 1, scale = 1)) +\n  theme(\n    legend.key.height = unit(1.5, \"cm\"),\n    plot.caption = element_text(size = 8, hjust = 0)\n  )\n```\n\n::: {.cell-output-display}\n![](24-communicate-quarto_files/figure-revealjs/unnamed-chunk-10-1.png){width=1152}\n:::\n:::\n\n\n\n\n## Accessible color scales\n\n::: smaller\nWhat do we mean by an accessible color scale?\nWhat types of color vision deficiencies are there?\n:::\n\n. . .\n\n**Demo:** What does the plot look like to people with various color vision deficiencies?\n\n## Use an accessible color scale {.smaller}\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nggplot(\n  staff_long,\n  aes(\n    x = year,\n    y = percentage,\n    color = str_wrap(faculty_type, 20),\n    group = str_wrap(faculty_type, 20)\n    )\n  ) +\n  geom_line(linewidth = 1) +\n  labs(\n    x = NULL,\n    y = \"Percent of Total Instructional Staff\",\n    color = NULL,\n    title = \"Trends in Instructional Staff Employment Status, 1975-2011\",\n    subtitle = \"All Institutions, National Totals\",\n    caption = \"Source: US Department of Education, IPEDS Fall Staff Survey\"\n  ) +\n  scale_y_continuous(labels = label_percent(accuracy = 1, scale = 1)) +\n  theme(\n    legend.key.height = unit(1.5, \"cm\"),\n    plot.caption = element_text(size = 8, hjust = 0)\n  ) +\n  scale_color_colorblind() # from ggthemes package\n```\n\n::: {.cell-output-display}\n![](24-communicate-quarto_files/figure-revealjs/unnamed-chunk-11-1.png){width=1152}\n:::\n:::\n\n\n\n\n## Use direct labeling {.smaller}\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nggplot(\n  staff_long,\n  aes(\n    x = year,\n    y = percentage,\n    color = faculty_type,\n    group = faculty_type\n    )\n  ) +\n  geom_line(linewidth = 1, show.legend = FALSE) +\n  geom_text(\n    data = staff_long |> filter(year == max(year)),\n    aes(x = year + 1, y = percentage, label = faculty_type),\n    hjust = \"left\", show.legend = FALSE, size = 4\n  ) +\n  labs(\n    x = NULL,\n    y = \"Percent of Total Instructional Staff\",\n    color = NULL,\n    title = \"Trends in Instructional Staff Employment Status, 1975-2011\",\n    subtitle = \"All Institutions, National Totals\",\n    caption = \"Source: US Department of Education, IPEDS Fall Staff Survey\"\n  ) +\n  scale_y_continuous(labels = label_percent(accuracy = 1, scale = 1)) +\n  theme(\n    plot.caption = element_text(size = 8, hjust = 0),\n    plot.margin = margin(0.1, 2.5, 0.1, 0.1, unit = \"in\")\n  ) +\n  coord_cartesian(clip = \"off\") +\n  scale_color_colorblind()\n```\n\n::: {.cell-output-display}\n![](24-communicate-quarto_files/figure-revealjs/unnamed-chunk-12-1.png){width=1152}\n:::\n:::\n\n\n\n\n## Use color to draw attention - Data prep {.smaller}\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstaff_long <- staff_long |>\n  mutate(faculty_type_color = if_else(faculty_type == \"Part-Time Faculty\", \"firebrick3\", \"gray40\"))\n\nstaff_long\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 55 × 4\n   faculty_type               year percentage faculty_type_color\n   <fct>                     <dbl>      <dbl> <chr>             \n 1 Full-Time Tenured Faculty  1975       29   gray40            \n 2 Full-Time Tenured Faculty  1989       27.6 gray40            \n 3 Full-Time Tenured Faculty  1993       25   gray40            \n 4 Full-Time Tenured Faculty  1995       24.8 gray40            \n 5 Full-Time Tenured Faculty  1999       21.8 gray40            \n 6 Full-Time Tenured Faculty  2001       20.3 gray40            \n 7 Full-Time Tenured Faculty  2003       19.3 gray40            \n 8 Full-Time Tenured Faculty  2005       17.8 gray40            \n 9 Full-Time Tenured Faculty  2007       17.2 gray40            \n10 Full-Time Tenured Faculty  2009       16.8 gray40            \n# ℹ 45 more rows\n```\n\n\n:::\n:::\n\n\n\n\n## Use color to draw attention - Plot {.smaller}\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nggplot(\n  staff_long,\n  aes(\n    x = year,\n    y = percentage,\n    color = faculty_type_color, group = faculty_type\n    )\n  ) +\n  geom_line(linewidth = 1, show.legend = FALSE) +\n  geom_text(\n    data = staff_long |> filter(year == max(year)),\n    aes(x = year + 1, y = percentage, label = faculty_type),\n    hjust = \"left\", show.legend = FALSE, size = 4\n  ) +\n  labs(\n    x = NULL,\n    y = \"Percent of Total Instructional Staff\",\n    color = NULL,\n    title = \"Trends in Instructional Staff Employment Status, 1975-2011\",\n    subtitle = \"All Institutions, National Totals\",\n    caption = \"Source: US Department of Education, IPEDS Fall Staff Survey\"\n  ) +\n  scale_y_continuous(labels = label_percent(accuracy = 1, scale = 1)) +\n  scale_color_identity() +\n  theme(\n    plot.caption = element_text(size = 8, hjust = 0),\n    plot.margin = margin(0.1, 2.5, 0.1, 0.1, unit = \"in\")\n  ) +\n  coord_cartesian(clip = \"off\")\n```\n\n::: {.cell-output-display}\n![](24-communicate-quarto_files/figure-revealjs/unnamed-chunk-14-1.png){width=1152}\n:::\n:::\n\n\n\n\n## Pick a purpose  {.smaller}\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\np <- ggplot(\n  staff_long,\n  aes(\n    x = year,\n    y = percentage,\n    color = faculty_type_color, group = faculty_type\n    )\n  ) +\n  geom_line(linewidth = 1, show.legend = FALSE) +\n  labs(\n    x = NULL,\n    y = \"Percent of Total Instructional Staff\",\n    color = NULL,\n    title = \"Trends in Instructional Staff Employment Status, 1975-2011\",\n    subtitle = \"All Institutions, National Totals\",\n    caption = \"Source: US Department of Education, IPEDS Fall Staff Survey\"\n  ) +\n  scale_y_continuous(labels = label_percent(accuracy = 1, scale = 1)) +\n  scale_color_identity() +\n  theme(\n    plot.caption = element_text(size = 8, hjust = 0),\n    plot.margin = margin(0.1, 0.6, 0.1, 0.1, unit = \"in\")\n  ) +\n  coord_cartesian(clip = \"off\") +\n  annotate(\n    geom = \"text\",\n    x = 2012, y = 41, label = \"Part-Time\\nFaculty\",\n    color = \"firebrick3\", hjust = \"left\", size = 5\n  ) +\n  annotate(\n    geom = \"text\",\n    x = 2012, y = 13.5, label = \"Other\\nFaculty\",\n    color = \"gray40\", hjust = \"left\", size = 5\n  ) +\n  annotate(\n    geom = \"segment\",\n    x = 2011.5, xend = 2011.5,\n    y = 7, yend = 20,\n    color = \"gray40\", linetype = \"dotted\"\n  )\n\np\n```\n\n::: {.cell-output-display}\n![](24-communicate-quarto_files/figure-revealjs/unnamed-chunk-15-1.png){width=1152}\n:::\n:::\n\n\n\n\n## Use labels to communicate the message {.smaller}\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\np +\n  labs(\n    title = \"Instruction by part-time faculty on a steady increase\",\n    subtitle = \"Trends in Instructional Staff Employment Status, 1975-2011\\nAll Institutions, National Totals\",\n    caption = \"Source: US Department of Education, IPEDS Fall Staff Survey\",\n    y = \"Percent of Total Instructional Staff\",\n    x = NULL\n  )\n```\n\n::: {.cell-output-display}\n![](24-communicate-quarto_files/figure-revealjs/unnamed-chunk-16-1.png){width=1152}\n:::\n:::\n\n\n\n\n## Simplify  {.smaller}\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\np +\n  labs(\n    title = \"Instruction by part-time faculty on a steady increase\",\n    subtitle = \"Trends in Instructional Staff Employment Status, 1975-2011\\nAll Institutions, National Totals\",\n    caption = \"Source: US Department of Education, IPEDS Fall Staff Survey\",\n    y = \"Percent of Total Instructional Staff\",\n    x = NULL\n  ) +\n  theme(panel.grid.minor = element_blank())\n```\n\n::: {.cell-output-display}\n![](24-communicate-quarto_files/figure-revealjs/unnamed-chunk-17-1.png){width=1152}\n:::\n:::\n\n\n\n\n## Summary {.smaller}\n\n-   Represent percentages as parts of a whole\n-   Place variables representing time on the x-axis when possible\n-   Pay attention to data types, e.g., represent time as time on a continuous scale, not years as levels of a categorical variable\n-   Prefer direct labeling over legends\n-   Use accessible colors\n-   Use color to draw attention\n-   Pick a purpose and label, color, annotate for that purpose\n-   Communicate your main message directly in the plot labels\n-   Simplify before you call it done (a.k.a. \"Before you leave the house, look in the mirror and take one thing off\")\n\n",
    "supporting": [
      "24-communicate-quarto_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}