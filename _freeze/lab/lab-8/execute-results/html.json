{
  "hash": "97f7446f550f7ab9b2da2ff824dff8eb",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: Lab 8\nsubtitle: To be posted\ncategories: Lab\ndescription: \"Mon, Nov 25 at 8:30 am\"\ndraft: true\neditor_options: \n  chunk_output_type: console\n---\n\n\n\n\n\n# Introduction\n\nIn this lab you'll **TO DO: Add intro.**\nAnd you'll wrap up the lab revisiting the topic of data science ethics.\n\n## Learning objectives\n\nBy the end of the lab, you will...\n\n-   **TO DO: Add LOs.**\n\nAnd, as usual, you will also...\n\n-   Get more experience with data science workflow using R, RStudio, Git, and GitHub\n-   Further your reproducible authoring skills with Quarto\n-   Improve your familiarity with version control using Git and GitHub\n\n## Getting started\n\nLog in to RStudio, clone your `lab-8` repo from GitHub, open your `lab-8.qmd` document, and get started!\n\n## Packages\n\nIn this lab, we will work with the\n\n-   **tidyverse** package for doing data analysis in a \"tidy\" way,\n-   **tidymodels** package for modeling in a \"tidy\" way, and\n-   **openintro** package for the dataset for Part 1. **TO DO:** Check.\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(tidymodels)\nlibrary(openintro)\n```\n:::\n\n\n\n\n\n-   **Run** the code cell by clicking on the green triangle (play) button for the code cell labeled `load-packages`. This loads the package so that its features (the functions and datasets in it) are accessible from your *Console*.\n-   Then, **render** the document that loads this package to make its features (the functions and datasets in it) available for other code cells in your Quarto document.\n\n## Guidelines\n\n\nAs we've discussed in lecture, your plots should include an informative title, axes and legends should have human-readable labels, and careful consideration should be given to aesthetic choices.\n\nAdditionally, code should follow the [tidyverse style](https://style.tidyverse.org/).\nParticularly,\n\n-   there should be spaces before and line breaks after each `+` when building a `ggplot`,\n\n-   there should also be spaces before and line breaks after each `|>` in a data transformation pipeline,\n\n-   code should be properly indented,\n\n-   there should be spaces around `=` signs and spaces after commas.\n\nFurthermore, all code should be visible in the PDF output, i.e., should not run off the page on the PDF.\nLong lines that run off the page should be split across multiple lines with line breaks.\n\n::: callout-important\nContinuing to develop a sound workflow for reproducible data analysis is important as you complete the lab and other assignments in this course.\nThere will be periodic reminders in this assignment to remind you to **render, commit, and push** your changes to GitHub.\nYou should have at least 3 commits with meaningful commit messages by the end of the assignment.\n:::\n\n\n\n::: callout-important\nYou are also expected to pay attention to [code smell](https://en.wikipedia.org/wiki/Code_smell) in addition to code style and readability.\nYou should review and improve your code to avoid redundant steps (e.g., grouping, ungrouping, and grouping again by the same variable in a pipeline), using inconsistent syntax (e.g., `!` to say \"not\" in one place and `-` in another place), etc.\n:::\n\n# Part 1: Lemurs\n\nThis week we'll be working with data from the [Duke Lemur Center](https://lemur.duke.edu/), which houses over 200 lemurs across 14 species -- the most diverse population of lemurs on Earth, outside their native Madagascar.\n\n> Lemurs are the most threatened group of mammals on the planet, and 95% of lemur species are at risk of extinction.\n> Our mission is to learn everything we can about lemurs -- because the more we learn, the better we can work to save them from extinction.\n> They are endemic only to Madagascar, so it's essentially a one-shot deal: once lemurs are gone from Madagascar, they are gone from the wild.\n\n> By studying the variables that most affect their health, reproduction, and social dynamics, the Duke Lemur Center learns how to most effectively focus [their conservation efforts](https://lemur.duke.edu/protect/overview-madagascar-conservation-programs/).\n> And the more we learn about lemurs, the better we can educate the public around the world about just how amazing these animals are, why they need to be protected, and how each and every one of us can make a difference in their survival.\n\n> Source: [TidyTuesday](https://github.com/rfordatascience/tidytuesday/blob/master/data/2021/2021-08-24/readme.md)\n\nThe codebook for the deataset can be found [here](https://github.com/rfordatascience/tidytuesday/blob/master/data/2021/2021-08-24/readme.md#lemur_datacsv).\nWhile the TidyTuesday project used the full dataset, we'll be working with a subset, which can be found in the data folder.\n\nFirst let's load the packages.\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(tidymodels)\n```\n:::\n\n\n\n\n\n## Question 1\n\nLoad the `lemurs` data from your `data` folder and save it as `lemurs`.\nThen, report which \"types\" of lemurs are represented in the sample and how many of each.\nNote that this information is in the `taxon` variable.\nYou should refer back to the linked data dictionary to understand what the different values of `taxon` mean.\nYour response should be a tibble with at least three columns, `taxon`, `taxon_name` (a new variable you create that contains the description of the `taxon`, e.g., `EMON` is `Mongoose lemur`), and `n` (number of lemurs with that taxon).\n\n\n\n\n\n\n\n\n\n\n\n## Question 2\n\nWhat is the **mean** weight of **ring-tailed lemurs**?\nCalculate, visualize, and interpret a 95% bootstrap confidence interval together with your point estimate.\nUse `set.seed(123)` and `reps = 1000` to create your bootstrap confidence interval.\n\n::: callout-tip\nBelow is a step-by-step recipe for constructing and visualizing a confidence interval.\nThe code snippets shown are not \"complete\", they're intended to guide you in the right direction.\n\n-   Step 1: Create a dataset of ring-tailed lemurs, and call it `lemurs_rt`. Note, these are `taxon == \"LCAT\"`.\n\n\n\n\n\n\n\n\n\n\n\n-   Step 2: Calculate the mean weight of ring-tailed lemurs.\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nobs_stat_mean_rt <- lemurs_rt |>\n  specify(response = weight_g) |>\n  calculate(stat = \"mean\")\n```\n:::\n\n\n\n\n\n-   Step 3: Construct a bootstrap distribution. Note: There is a `generate()` step, so you also need to set a seed before running the following.\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nboot_dist_mean_rt <- lemurs_rt |>\n  specify(response = weight_g) |>\n  generate(reps = 1000, type = \"bootstrap\") |>\n  calculate(stat = \"mean\")\n```\n:::\n\n\n\n\n\n-   Step 4: Calculate the bounds of the confidence interval. Don't forget to interpret it as well!\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nci_95_mean_rt <- boot_dist_mean_rt |>\n  get_confidence_interval(\n    point_estimate = obs_stat_mean_rt, \n    level = 0.95\n  )\n```\n:::\n\n\n\n\n\n-   Step 5: Visualize the confidence interval, overlaying it on the bootstrap distribution.\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvisualize(boot_dist_mean_rt) +\n  shade_confidence_interval(endpoints = ci_95_mean_rt)\n```\n:::\n\n\n\n\n:::\n\n## Question 3\n\nWhat is the **median** weight of ring-tailed lemurs?\nWhat is the **median** weight of mongoose lemurs?\nReport a 95% bootstrap confidence interval together with your point estimates.\nUse `set.seed(123)` and `reps = 10000` to create your bootstrap confidence intervals.\n\n## Question 4\n\nYour friend has never taken a statistics course.\nDescribe to your friend the process of \"bootstrap sampling\" in the previous exercise to create a bootstrap confidence interval in your own words.\nWalk your friend through the process of collecting a bootstrap sample, computing a statistic and then repeating).\nYou may find it helpful to describe it as drawing pieces of paper from a bag like we did in class.\n\n::: callout-tip\nWhat would you write on the slips of paper?\nHow many pieces of paper would be in the bag(s)?\nHow many bag(s) would you need for the above exercise?\n:::\n\n## Question 5\n\nDo female lemurs differ in weight from male lemurs?\nReport the difference in mean weights between groups.\nNext, construct a 99% bootstrap distribution for the difference in means between groups and interpret it.\nIf the interval covers 0, you might think there is no difference between groups.\nDoes the interval cover 0?\nUse `set.seed(123)` and `reps = 10000.`\n\n## Question 6\n\nCreate a new column that tells you whether or not a lemur was born in the first or second half of the year (January through June vs July through December).\nCreate a meaningful plot to illustrate the weights of each group of lemurs.\nUse `theme_bw()` to replace the default gray plot background.\nBased on your figure, which group of lemurs weighs more?\nIs the distribution of one or both groups skewed or symmetric?\nSee [here](https://openintro-ims2.netlify.app/05-explore-numerical#sec-histograms) for more information about skew vs symmetric distributions.\n\n## Question 7\n\nIs there more variability in weight for lemurs born in the first half or second half of the year?\nReport the estimated standard deviation of each group.\nReport a 90% bootstrap confidence interval of s.d.\nfor each group.\nInterpret the confidence intervals in context.\nUse `set.seed(123)` and remember to set `reps = 10000`.\n\n# Part 2: Harassment at work\n\nThe General Social Survey (GSS) gathers data on contemporary American society in order to monitor and explain trends and constants in attitudes, behaviors, and attributes.\nHundreds of trends have been tracked since 1972.\nIn addition, since the GSS adopted questions from earlier surveys, trends can be followed for up to 70 years.\nThe GSS contains a standard core of demographic, behavioral, and attitudinal questions, plus topics of special interest.\nAmong the topics covered are civil liberties, crime and violence, inter-group tolerance, morality, national spending priorities, psychological well-being, social mobility, and stress and traumatic events.\n\nThe data for this part comes from the `gss16` data frame (containing data from the 2016 GSS) from the **dsbox** package.\n\n## Question 8\n\nIn 2016, the GSS added a new question on harassment at work.\nThe question is phrased as the following.\n\nOver the past five years, have you been harassed by your superiors or co-workers at your job, for example, have you experienced any bullying, physical or psychological abuse?\n\nAnswers to this question are stored in the `harass5` variable in our data set.\n\na.  Create a subset of the data that only contains `Yes` and `No` answers for the harassment question.\n    How many respondents chose each of these answers?\n\nb.  Describe how bootstrapping can be used to estimate the proportion of all Americans who have been harassed by their superiors or co-workers at their job.\n\nc.  Calculate a 95% bootstrap confidence interval for the proportion of Americans who have been harassed by their superiors or co-workers at their job.\n    Use 1000 iterations when creating your bootstrap distribution.\n    Interpret this interval in context of the data.\n\n# Part 3: Second chances\n\n## Question 9\n\nA second chance for an exercise: Take one of the exercises from a previous homework assignment, ideally one you received more feedback on / lost more points on and improve it.\nFirst, write one sentence reminding us of the specific exercise and a a few sentences on why you chose this specific exercise to improve and how you plan to improve it.\nSome of these improvements might be \"fixes\" for things that were pointed out as missing or incorrect.\nSome of them might be things you hoped to do before the homework deadline, but didn't get a chance to.\nSome notes for completing this exercise:\n\n-   You will need to add your data from your the homework assignment to the data/ folder in this assignment.\n    You do not need to also add a data dictionary.\n\n-   You will need to copy over any code needed for cleaning / preparing your data for this specific exercise.\n    You can reuse code from your previous assignment but note that we will re-evaluate your code as part of the grading for this exercise.\n    This means we might catch something wrong with it that we didn't catch before, so if you spot any errors make sure to fix them.\n\n-   Don't worry about being critical of your own work.\n    Even if you lost no points on the plot, if you think it can be improved, articulate how / why.\n    We will not go back and penalize for any mistakes you might point out that we didn't catch at the time of grading your homework assignment.\n    There's no risk to being critical!\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}